@isTest
public class TrainingControllerTest {
    
    @testSetup
    static void setupData(){
        Employee__c e = new Employee__c();
        e.Name = 'Test Tester';
        e.CI__c = 00000000;
        e.Role__c = 'Developer';
        e.Skills__c = 'Test Skills';
        insert e;
        
        Project__c p = new Project__c();
        p.Name = 'Test Project';
        p.Client__c = 'Test Client';
        insert p;
        
        Technology__c t = new Technology__c();
        t.Name = 'Tech1';
        t.Oriented_To__c = 'Developer';
        t.Resources__c = 'Resource Test';
        insert t;
        
        Project_Technology__c pt = new Project_Technology__c();
        pt.Project__c = p.Id;
        pt.Technology__c = t.Id;
        
    }
    
    @isTest
    static void testGenerateProjectPathTraining(){
        Employee__c e = [SELECT Id FROM Employee__c WHERE Name = 'Test Tester'];
        Project__c p = [SELECT Id FROM Project__c WHERE Name = 'Test Project'];
        Test.startTest();
        TrainingController.generateProjectPathTraining(p.Id, e.Id, 'Developer');
        Test.stopTest();
        
        Training__c training = [SELECT Id, Notes__c, Trainee__c, RecordTypeId FROM Training__c WHERE Trainee__c =: e.Id];
        
        System.assertEquals('Training generated by the app.', training.Notes__c);
        System.assertEquals('0121I000000IhIaQAK', training.RecordTypeId);
    }

}